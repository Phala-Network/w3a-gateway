!function(){"use strict";let e=window.w3a.q||[],t={siteId:"",spa:!1,trackerUrl:"",clientId:""};const n={set:i,trackPageview:function(e){a({},"pageview")},trackGoal:function(e,t){a({gcode:e,gval:t},"goal")},setTrackerUrl:function(e){return i("trackerUrl",e),e},generateClientId:function(){window.Fingerprint2&&Fingerprint2.get(function(e){var t=e.map(function(e){return e.value});i("clientId",Fingerprint2.x64hash128(t.join(""),31))})}};function i(e,n){if(t[e]=n,"spa"==e)if("pushstate"==n&&void 0!==history){var i=history.pushState;history.pushState=function(){var e=i.apply(history,arguments);return window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("locationchange")),e};var o=history.replaceState;history.replaceState=function(){var e=o.apply(history,arguments);return window.dispatchEvent(new Event("replacestate")),window.dispatchEvent(new Event("locationchange")),e},window.addEventListener("popstate",function(){window.dispatchEvent(new Event("locationchange"))}),window.addEventListener("locationchange",function(){w3a("trackPageview")})}else"hash"==n&&window.addEventListener("hashchange",function(){w3a("trackPageview")})}function o(e){return"?"+Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}function a(e,n){if(e=e||{},"visibilityState"in document&&"prerender"===document.visibilityState)return;if(/bot|google|baidu|bing|msn|duckduckbot|teoma|slurp|yandex/i.test(navigator.userAgent))return;if(null===document.body)return void document.addEventListener("DOMContentLoaded",()=>{a(e,n)});let i=window.location;if(""===i.host)return;let r=document.querySelector('link[rel="canonical"][href]');if(r){let e=document.createElement("a");e.href=r.href,i=e}let c=e.path||i.pathname+i.search;c=c||"/","hash"==t.spa&&""!==window.location.hash.substr(1)&&(c="/"+window.location.hash);let s=e.hostname||i.protocol+"//"+i.hostname,d=e.referrer||"";document.referrer.indexOf(s)<0&&(d=document.referrer);const l={p:c,h:s,r:d,sid:t.siteId,cid:t.clientId,tz:Intl.DateTimeFormat().resolvedOptions().timeZone,t:Date.now()};if("goal"==n)l.gcode=e.gcode,l.gval=e.gval,navigator.sendBeacon(e.trackerUrl+"/collectors/event"+o(l));else{console.log(t);let e=t.trackerUrl+"/collectors/page_view",n=document.createElement("img");n.setAttribute("alt",""),n.setAttribute("aria-hidden","true"),n.style.position="absolute",n.src=e+o(l),n.addEventListener("load",function(){n.parentNode.removeChild(n)}),document.body.appendChild(n)}}window.w3a=function(){var e=[].slice.call(arguments),t=e.shift();n[t].apply(this,e)},e.forEach(e=>w3a.apply(this,e))}();
